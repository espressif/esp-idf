.GATT_CASE: &GATT_CASE
  SDK: ESP32_IDF
  Test App: SSC_BLE
  auto test: 'Yes'
  category: Function
  test point 1: basic function
  initial condition: BLE_CONN3
  test environment: SSC_T2_5
  execution time: 0
  module: BT Stack
  sub module: GATT
  version: v1 (2016-12-31)
  CI ready: 'Yes'
  level: Integration
  allow fail: ''

.primary_service_discovery: &primary_service_discovery
  LIST_MERGE:
    - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut2_bt_mac>"
      - ["R SSC1 C +GATTC:Discover,OK"]

.included_service_connection: &included_primary_service_connection
  LIST_MERGE:
    - - "SSC SSC2 gatts -S -z load -p 0xA1"
      - ["R SSC2 C +GATTS:CreateService,OK,A001"]
    - - "SSC SSC2 gatts -S -z include -p 0xA1 -i 0xA0"
      - ["R SSC2 C +GATTS:AddIncludedService,OK"]
    - - "SSC SSC2 gatts -S -z add -p 0xA1"
      - ["R SSC2 C +GATTS:StartService,OK,A001"]
    - - SSC SSC1 gattc -F -r <dut2_bt_mac>
      - ['R SSC1 C +GATTC:OK']
    - - "SSC SSC1 bleconn -C -p 0x10 -a <dut2_bt_mac>"
      - ["R SSC1 C +BLECONN:GapConnect,OK,0010", "R SSC2 C +BLECONN:GapConnect"]

.included_second_service_connection: &included_second_service_connection
  LIST_MERGE:
    - - "SSC SSC2 gatts -S -z load -p 0xA4"
      - ["R SSC2 C +GATTS:StartService,OK,A004"]
    - - "SSC SSC2 gatts -S -z load -p 0xA1"
      - ["R SSC2 C +GATTS:CreateService,OK,A001"]
    - - "SSC SSC1 gatts -S -z add -p 0xA1"
      - ["R SSC1 C +GATTS:StartService,OK,A001"]
    - - "SSC SSC2 gatts -S -z include -p 0xA1 -i 0xA4"
      - ["R SSC2 C +GATTS:AddIncludedService,OK"]
    - - SSC SSC1 gattc -F -r <dut2_bt_mac>
      - ['R SSC1 C +GATTC:OK']
    - - "SSC SSC1 bleconn -C -p 0x10 -a <dut2_bt_mac>"
      - ["R SSC1 C +BLECONN:GapConnect,OK,0010", "R SSC2 C +BLECONN:GapConnect"]

.table_include_table_service: &table_include_table_service
  LIST_MERGE:
    - - "SSC SSC2 gatts -S -z load -p 0xA5 -i 0xA2"
      - ["R SSC2 C +GATTS:StartService,OK,A005"]
    - - SSC SSC1 gattc -F -r <dut2_bt_mac>
      - ['R SSC1 C +GATTC:OK']
    - - "SSC SSC1 bleconn -C -p 0x10 -a <dut2_bt_mac>"
      - ["R SSC1 C +BLECONN:GapConnect,OK,0010", "R SSC2 C +BLECONN:GapConnect"]

.table_include_service: &table_include_service
  LIST_MERGE:
    - - "SSC SSC2 gatts -S -z load -p 0xA5 -i 0xA0"
      - ["R SSC2 C +GATTS:StartService,OK,A005"]
    - - SSC SSC1 gattc -F -r <dut2_bt_mac>
      - ['R SSC1 C +GATTC:OK']
    - - "SSC SSC1 bleconn -C -p 0x10 -a <dut2_bt_mac>"
      - ["R SSC1 C +BLECONN:GapConnect,OK,0010", "R SSC2 C +BLECONN:GapConnect"]

.register_notify_c107: &register_notify_c107
  LIST_MERGE:
    - - "SSC SSC1 gattc -N -z register -s 0xA000 -c 0xC107 -p 0x10 -r <dut2_bt_mac>"
      - ["R SSC1 C +GATTC:RegNotify,OK,0010,A000,C107"]

.register_indicate_c108: &register_indicate_c108
  LIST_MERGE:
    - - "SSC SSC1 gattc -N -z register -s 0xA000 -c 0xC108 -p 0x10 -r <dut2_bt_mac>"
      - ["R SSC1 C +GATTC:RegNotify,OK,0010,A000,C108"]

.stop_adv: &stop_adv
  LIST_MERGE:
    - - "SSC SSC2 bleadv -D -z stop"
      - ["R SSC2 C +BLEADV:Stop"]

test cases:
- ID: BTSTK_GATT_60001
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set char value and value length longer than max length
  allow fail: 1/2
  steps: |
    1. DUT2 create service
    2. DUT2 set value length
  expected result: |
    1. succeed
    2. failed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - *stop_adv
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z set -l 3"
    - ["R SSC2 C +GATTS:SetAttrVal,ERROR"]
- ID: BTSTK_GATT_60002
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server get short char value and long char value
  allow fail: 1/2
  steps: |
    1. DUT2 create service
    2. DUT2 get short char
    3. DUT2 get long char
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - *stop_adv
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x01"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,256"]
- ID: BTSTK_GATT_60003
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set char value and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set short char value
    3. DUT2 get value
    4. DUT2 set long char value
    5. DUT2 get value
    6. DUT2 set long char value
    7. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
    5. succeed
    6. succeed
    7. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - *stop_adv
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z set -v 0x02"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x02"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z set -v 0x010203040506"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,6,0x010203040506"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z set -v 123456"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,6,0x313233343536"]
- ID: BTSTK_GATT_60004
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set special char value and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set char value
    3. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - *stop_adv
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z set -v JKLJGFD*^"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,9,0x4A4B4C4A4746442A5E"]
- ID: BTSTK_GATT_60005
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set char value length=0 and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set char value
    3. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - *stop_adv
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z set -l 0"
    - ["R SSC2 C +GATTS:SetAttrVal,ERROR"]
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x01"]
- ID: BTSTK_GATT_60006
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server only set char value length and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set char value
    3. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - *stop_adv
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z set -l 5"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,5"]
- ID: BTSTK_GATT_60007
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set  value
  summary: gattc write char value and gatts get
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write short char
    3. DUT2 get value
    4. DUT1 write longchar
    5. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
    5. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -p 0x10 -v 0x01 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C302", "R SSC1 C +GATTC:Write,OK,0010,A002,C302"]
  - - "SSC SSC2 gatts -V -c 0xC302 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x01"]
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC304 -p 0x10 -l 256 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Write,OK,0010,A002,C304"]
  - - "SSC SSC2 gatts -V -c 0xC304 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,256"]
- ID: BTSTK_GATT_60008
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: gatts set char value and gattc read
  steps: |
    1. DUT1 do service discovery
    2. DUT2 set  short char value
    3. DUT1 read
    4. DUT2 set long char value
    5. DUT1 read
    6. DUT2 set long char length
    7. DU1 read
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
    5. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC2 gatts -V -c 0xC300 -p 0xA2 -z set -v 0x02"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C300,1", "R SSC1 C +GATTC:Read,OK,0010,A002,C300"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z set -v 0x02"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C301,1", "R SSC1 C +GATTC:Read,OK,0010,A002,C301"]
  - - "SSC SSC2 gatts -V -c 0xC301 -p 0xA2 -z set -l 5"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C301,5", "R SSC1 C +GATTC:Read,OK,0010,A002,C301"]
- ID: BTSTK_GATT_60009
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set descriptor value and value length longer than max length
  steps: |
    1. DUT2 create service
    2. DUT2 set descriptor value length
  expected result: |
    1. succeed
    2. failed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z set -l 3"
    - ["R SSC2 C +GATTS:SetAttrVal,ERROR"]
- ID: BTSTK_GATT_60010
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server get short descriptor value
  steps: |
    1. DUT2 create service
    2. DUT2 get short char
  expected result: |
    1. succeed
    2. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x00"]
- ID: BTSTK_GATT_60011
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set descriptor value and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set descriptor value
    3. DUT2 get value
    4. DUT2 set descriptor value
    5. DUT2 get value
    6. DUT2 set descriptor value
    7. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
    5. succeed
    6. succeed
    7. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z set -v 0x02"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x02"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z set -v 0x010203040506"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,6,0x010203040506"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z set -v 123456"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,6,0x313233343536"]
- ID: BTSTK_GATT_60012
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set special descriptor value and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set descriptor value
    3. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z set -v JKLJGFD*^"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,9,0x4A4B4C4A4746442A5E"]
- ID: BTSTK_GATT_60013
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server set descriptor value length=0 and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set descriptor value
    3. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z set -l 0"
    - ["R SSC2 C +GATTS:SetAttrVal,ERROR"]
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x00"]
- ID: BTSTK_GATT_60014
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: GATT server only set descriptor value length and get value
  steps: |
    1. DUT2 create service
    2. DUT2 set char value
    3. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_INIT3
  cmd set:
  - ""
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z set -l 5"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,5"]
- ID: BTSTK_GATT_60015
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set  value
  summary: gattc write descriptor value and gatts get
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write short descriptor
    3. DUT2 get value
    4. DUT1 write long descriptor
    5. DUT2 get value
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
    5. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC300 -d 0x2901 -p 0x10 -v 0x01 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C300,2901", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C300,2901"]
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,1,0x01"]
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC301 -d 0x2901 -p 0x10 -l 256 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C301,2901"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z get"
    - ["R SSC2 C +GATTS:GetAttrValue,256"]
- ID: BTSTK_GATT_60016
  <<: *GATT_CASE
  test point 2: BLE GATT server get and set value
  summary: gatts set value and gattc read
  steps: |
    1. DUT1 do service discovery
    2. DUT2 set short descriptor value
    3. DUT1 read
    4. DUT2 set long descriptor value
    5. DUT1 read
    6. DUT2 set long descriptor length
    7. DU1 read
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
    5. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC2 gatts -V -c 0xC300 -d 0x2901 -p 0xA2 -z set -v 0x02"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC300 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C300,2901,1", "R SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C300,2901"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z set -v 0x02"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC301 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C301,2901,1", "R SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C301,2901"]
  - - "SSC SSC2 gatts -V -c 0xC301 -d 0x2901 -p 0xA2 -z set -l 5"
    - ["R SSC2 C +GATTS:SetAttrVal,OK"]
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC301 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C301,2901,5", "R SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C301,2901"]
- ID: BTSTK_GATT_21007
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read auto reply short char created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read auto reply short char
  expected result: |
    1. succeed
    2. succeed
  initial condition: BLE_CONN3
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C300,1", "R SSC1 C +GATTC:Read,OK,0010,A002,C300"]
- ID: BTSTK_GATT_21008
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read auto reply long char created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read auto reply long char
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C301,256", "P SSC1 C +GATTC:Read,OK,0010,A002,C301"]
- ID: BTSTK_GATT_21009
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read app reply short char created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read app reply short char
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC310 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C310,1", "P SSC1 C +GATTC:Read,OK,0010,A002,C310"]
- ID: BTSTK_GATT_21010
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read app reply long char created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read app reply long char
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC311 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C311,256", "P SSC1 C +GATTC:Read,OK,0010,A002,C311"]
- ID: BTSTK_GATT_21011
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read auto reply short descriptor created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read auto reply short descriptor
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC300 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C300,2901,1", "P SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C300,2901"]
- ID: BTSTK_GATT_21012
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read auto reply long descriptor created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read auto reply long descriptor
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC301 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C301,2901,256", "P SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C301,2901"]
- ID: BTSTK_GATT_21013
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read app reply short descriptor created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read app reply short descriptor
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC310 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C310,2901,1", "P SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C310,2901"]
- ID: BTSTK_GATT_21014
  <<: *GATT_CASE
  test point 2: BLE GATT client read char and descriptor
  summary: GATT client read app reply long descriptor created by table
  steps: |
    1. DUT1 do discover
    2. DUT1 read app reply long descriptor
  expected result: |
    1. succeed
    2. succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC311 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:ReadOnce,0010,A002,C311,2901,256", "P SSC1 C +GATTC:ReadDescriptor,OK,0010,A002,C311,2901"]
- ID: BTSTK_GATT_22010
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write with response to auto reply short char with response created by table
  allow fail: 1/2
  steps: |
    1. DUT1 do service discovery
    2. GATT client write with response to auto reply short char with response created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -p 0x10 -r <dut2_bt_mac> -v 0x01 -w 2"
    - ["P SSC1 C +GATTC:WriteOnce,0010,A002,C302", "P SSC1 C +GATTC:Write,OK,0010,A002,C302"]
- ID: BTSTK_GATT_22011
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write without response to auto reply short char without response created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write without response to auto reply short char without response created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC303 -p 0x10 -v 0x01 -w 1 -r <dut2_bt_mac>"
    - - "P SSC1 C +GATTC:WriteOnce,0010,A002,C303"
      - "P SSC2 C +GATTS:Write,OK,A002,C303"
      - "P SSC1 C +GATTC:Write,OK,0010,A002,C303"
- ID: BTSTK_GATT_22012
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client prepare write and do execute to auto reply char created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client prepare write and do execute to auto reply char created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC304 -p 0x10 -l 256 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Write,OK,0010,A002,C304"]
- ID: BTSTK_GATT_22013
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client prepare write and do cancel to auto reply char created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client prepare write and do cancel to auto reply char created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC304 -p 0x10 -l 256 -e 0 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Write,OK,0010,A002,C304"]
- ID: BTSTK_GATT_22014
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write to auto reply short descriptor created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write to auto reply short descriptor created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC300 -d 0x2901 -p 0x10 -v 0x01 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C300,2901", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C300,2901"]
- ID: BTSTK_GATT_22015
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write to auto reply long descriptor created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write to auto reply long descriptor created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC301 -d 0x2901 -p 0x10 -l 256 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C301,2901"]
- ID: BTSTK_GATT_22016
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write to auto reply long descriptor created by table and cancel
  steps: |
    1. DUT1 do service discovery
    2. GATT client write to auto reply long descriptor created by table and cancel
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC301 -d 0x2901 -p 0x10 -l 256 -e 0 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C301,2901"]
- ID: BTSTK_GATT_22017
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write with response to app reply short char with response created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write with response to app reply short char with response created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC312 -p 0x10 -v 0x01 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C312", "R SSC1 C +GATTC:Write,OK,0010,A002,C312"]
- ID: BTSTK_GATT_22018
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write without response to app reply short char without response created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write without response to app reply short char without response created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC313 -p 0x10 -v 0x01 -w 1 -r <dut2_bt_mac>"
    - - "P SSC1 C +GATTC:WriteOnce,0010,A002,C313"
      - "P SSC2 C +GATTS:Write,OK,A002,C313"
      - "P SSC1 C +GATTC:Write,OK,0010,A002,C313"
- ID: BTSTK_GATT_22019
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client prepare write and do execute to app reply char created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client prepare write and do execute to app reply char created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC314 -p 0x10 -l 256 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Write,OK,0010,A002,C314"]
- ID: BTSTK_GATT_22020
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client prepare write and do cancel to app reply char created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client prepare write and do cancel to app reply char created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC314 -p 0x10 -l 256 -e 0 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Write,OK,0010,A002,C314"]
- ID: BTSTK_GATT_22021
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write to app reply short descriptor created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write to app reply short descriptor created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC310 -d 0x2901 -p 0x10 -v 0x01 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C310,2901", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C310,2901"]
- ID: BTSTK_GATT_22022
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write to app reply long descriptor created by table
  steps: |
    1. DUT1 do service discovery
    2. GATT client write to app reply long descriptor created by table
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC311 -d 0x2901 -p 0x10 -l 256 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C311,2901"]
- ID: BTSTK_GATT_22023
  <<: *GATT_CASE
  test point 2: BLE GATT client write char and descriptor
  summary: GATT client write to app reply long descriptor created by table and cancel
  steps: |
    1. DUT1 do service discovery
    2. GATT client write to app reply long descriptor created by table and cancel
  expected result: |
    1. succeed
    2. write succeed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC311 -d 0x2901 -p 0x10 -l 256 -e 0 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C311,2901"]
- ID: BTSTK_GATT_23005
  <<: *GATT_CASE
  test point 2: BLE GATT client receive notify and indication
  summary: GATT client receive notify on auto reply notify char created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 register notify on auto reply notification char and write to CCC
    3. DUT2 do notify
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 recv notify
  initial condition: BLE_CONN3
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC305 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C305"]
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC305 -d 0x2902 -p 0x10 -v 0x0100 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C305,2902", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C305,2902"]
  - - "SSC SSC2 gatts -N -c 0xC305 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["R SSC1 C +GATTC:Notification,0010,A002,C305,1"]
- ID: BTSTK_GATT_23006
  <<: *GATT_CASE
  test point 2: BLE GATT client receive notify and indication
  summary: GATT client receive indication on auto reply indication char created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 register notify on auto reply inidcation char and write to CCC
    3. DUT2 do indication
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 recv indication
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC306 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C306"]
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC306 -d 0x2902 -r <dut2_bt_mac> -v 0x0002 -p 0x10"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C306,2902", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C306,2902"]
  - - "SSC SSC2 gatts -I -c 0xC306 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["R SSC1 C +GATTC:Indication,0010,A002,C306,1"]
- ID: BTSTK_GATT_23007
  <<: *GATT_CASE
  test point 2: BLE GATT client receive notify and indication
  summary: GATT client can't receive notification/indication without write to CCC (auto service auto reply)
  steps: |
    1. DUT1 do service discovery
    2. DUT1 register notify on notify and inidcation char
    3. DUT2 do notify and indication
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 can recv notify and indication (this is aganist Spec, but a reasonable behavior in bluedroid)
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC305 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C305"]
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC306 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C306"]
  - - "SSC SSC2 gatts -N -c 0xC305 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["P SSC1 C +GATTC:Notification,0010,A002,C305,1"]
  - - "SSC SSC2 gatts -I -c 0xC306 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["P SSC1 C +GATTC:Indication,0010,A002,C306,1"]
- ID: BTSTK_GATT_23008
  <<: *GATT_CASE
  test point 2: BLE GATT client receive notify and indication
  summary: GATT client receive notify on app reply notify char created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 register notify on app reply notification char and write to CCC
    3. DUT2 do notify
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 recv notify
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC315 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C315"]
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC315 -d 0x2902 -p 0x10 -r <dut2_bt_mac> -v 0x0100"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C315,2902", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C315,2902"]
  - - "SSC SSC2 gatts -N -c 0xC315 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["R SSC1 C +GATTC:Notification,0010,A002,C315,1"]
- ID: BTSTK_GATT_23009
  <<: *GATT_CASE
  test point 2: BLE GATT client receive notify and indication
  summary: GATT client receive indication on app reply indication char created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 register notify on app reply inidcation char and write to CCC
    3. DUT2 do indication
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 recv indication
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC316 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C316"]
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC316 -d 0x2902 -p 0x10 -r <dut2_bt_mac> -v 0x0002"
    - ["R SSC1 C +GATTC:WriteOnce,0010,A002,C316,2902", "R SSC1 C +GATTC:WriteDescriptor,OK,0010,A002,C316,2902"]
  - - "SSC SSC2 gatts -I -c 0xC316 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["R SSC1 C +GATTC:Indication,0010,A002,C316,1"]
- ID: BTSTK_GATT_23010
  <<: *GATT_CASE
  test point 2: BLE GATT client receive notify and indication
  summary: GATT client can't receive notification/indication without write to CCC (auto service manual reply)
  steps: |
    1. DUT1 do service discovery
    2. DUT1 register notify on notify and inidcation char
    3. DUT2 do notify and indication
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 can recv notify and indication (this is aganist Spec, but a reasonable behavior in bluedroid)
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC315 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C315"]
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC316 -p 0x10 -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C316"]
  - - "SSC SSC2 gatts -N -c 0xC315 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["P SSC1 C +GATTC:Notification,0010,A002,C315,1"]
  - - "SSC SSC2 gatts -I -c 0xC316 -p 0xA2 -v 0x01 -r <dut1_bt_mac>"
    - ["P SSC1 C +GATTC:Indication,0010,A002,C316,1"]
- ID: BTSTK_GATT_24003
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid read
  summary: GATT client read to a char without read property created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 read to auto reply char without read property create by table
    3. DUT1 read to app reply char without read property create by table
  expected result: |
    1. succeed
    2. failed
    3. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC302 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Read,ERROR"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC312 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Read,ERROR"]
- ID: BTSTK_GATT_24004
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid read
  summary: GATT client read to a descriptor without read property created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 read to auto reply descriptor without read property created by table
    3. DUT1 read to app reply descriptor without read property created by table
  expected result: |
    1. succeed
    2. failed
    3. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC303 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Read,ERROR"]
  - - "SSC SSC1 gattc -R -z descriptor -s 0xA002 -c 0xC313 -d 0x2901 -p 0x10 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Read,ERROR"]
- ID: BTSTK_GATT_25008
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client write with response to a char without write property created by table
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write with response to auto reply char without write property
    3. DUT1 write with response to manual reply char without write property
  expected result: |
    1. succeed
    2. failed
    3. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut2_bt_mac> -l 1"
    - ["R SSC1 C +GATTC:Write,ERROR"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC310 -p 0x10 -r <dut2_bt_mac> -l 1"
    - ["R SSC1 C +GATTC:Write,ERROR"]
- ID: BTSTK_GATT_25009
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client write without response to a char created by table without write property
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write without response to auto reply char created by table without write property
    3. DUT1 write without response to app reply char created by table without write property
  expected result: |
    1. succeed
    2. succeed (write without response always succeed)
    3. succeed (write without response always succeed)
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut2_bt_mac> -l 1 -w 1"
    - ["R SSC1 C +GATTC:Write,OK"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut2_bt_mac> -l 1 -w 1"
    - ["R SSC1 C +GATTC:Write,OK"]
- ID: BTSTK_GATT_25010
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client write to a descriptor created by table without write property
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write to auto reply descriptor create by table without write property
    3. DUT1 write to app reply descriptor create by table without write property
  expected result: |
    1. succeed
    2. failed
    3. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC302 -d 0x2901 -p 0x10 -r <dut2_bt_mac> -l 1"
    - ["R SSC1 C +GATTC:Write,ERROR"]
  - - "SSC SSC1 gattc -W -z descriptor -s 0xA002 -c 0xC312 -d 0x2901 -p 0x10 -r <dut2_bt_mac> -l 1"
    - ["R SSC1 C +GATTC:Write,ERROR"]
- ID: BTSTK_GATT_25011
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client prepare write to a char created by table without write property
  steps: |
    1. DUT1 do service discovery
    2. DUT1 prepare write to auto reply char created by table without write property
    3. DUT1 prepare write to app reply char created by table without write property
  expected result: |
    1. succeed
    2. failed
    3. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC300 -p 0x10 -r <dut2_bt_mac> -l 256"
    - ["R SSC1 C +GATTC:Write,ERROR"]
  - - "SSC SSC1 gattc -W -z longChar -s 0xA002 -c 0xC310 -p 0x10 -r <dut2_bt_mac> -l 256"
    - ["R SSC1 C +GATTC:Write,ERROR"]
- ID: BTSTK_GATT_25012
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client prepare write to a descriptor created by table without write property
  steps: |
    1. DUT1 do service discovery
    2. DUT1 prepare write to auto reply descriptor created by table without write property
    3. DUT1 prepare write to app reply descriptor created by table without write property
  expected result: |
    1. succeed
    2. failed
    3. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC302 -d 0x2901 -p 0x10 -r <dut2_bt_mac> -l 256"
    - ["R SSC1 C +GATTC:Write,ERROR"]
  - - "SSC SSC1 gattc -W -z longDescriptor -s 0xA002 -c 0xC312 -d 0x2901 -p 0x10 -r <dut2_bt_mac> -l 256"
    - ["R SSC1 C +GATTC:Write,ERROR"]
- ID: BTSTK_GATT_25014
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client write without response to a char created by table will send response
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write without response to auto reply char created by table will send response
    3. DUT1 write without response to app reply char created by table will send response
  expected result: |
    1. succeed
    2. succeed (write without response always succeed)
    3. succeed (write without response always succeed)
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -p 0x10 -r <dut2_bt_mac> -v 0x01 -w 1"
    - ["R SSC1 C +GATTC:Write,OK"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -p 0x10 -r <dut2_bt_mac> -v 0x01 -w 1"
    - ["R SSC1 C +GATTC:Write,OK"]
- ID: BTSTK_GATT_25017
  <<: *GATT_CASE
  test point 2: BLE GATT client do invalid write
  summary: GATT client write short char value length longer than max length
  initial condition: BLE_CONN3
  steps: |
    1. DUT1 do service discovery
    2. DUT1 write char value
  expected result: |
    1. succeed
    2. failed
  cmd set:
  - ""
  - *primary_service_discovery
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -l 2 -r <dut2_bt_mac>"
    - ["P SSC1 C +GATTC:Write,ERROR"]
- ID: BTSTK_GATT_26003
  <<: *GATT_CASE
  test point 2: BLE GATT config mtu
  summary: GATT client and server config different mtu size
  steps: |
    1. client set mtu size 365 and server set mtu size 261
    2. client config mtu
  expected result:
    1. succeed
    2. succeed
  cmd set:
  - ""
  - - "SSC SSC1 bleconn -D -z all"
    - ["P SSC1 C +BLECONN:GapDisconnect,OK", "P SSC2 C +BLECONN:GapDisconnect,OK"]
  - - "SSC SSC1 gattc -S -m 365"
    - ["R SSC1 C +GATTC:OK"]
  - - "SSC SSC2 gatts -C -m 261"
    - ["R SSC2 C +GATTS:OK"]
  - - "SSC SSC2 bleadv -D -z start"
    - ['R SSC2 C +BLEADV:OK']
  - - "SSC SSC1 bleconn -C -p 0x10 -a <dut2_bt_mac>"
    - ['R SSC1 C +BLECONN:GapConnect,OK', 'R SSC2 C +BLECONN:GapConnect,OK']
  - - "SSC SSC1 gattc -C -r <dut2_bt_mac>"
    - ["R SSC1 C +GATTC:OK","P SSC[1-2] C ConfigMTU,OK,261"]
- ID: BTSTK_GATT_30001
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection service discovery test
  summary: do primary service discovery when DUT1 role is master, connected with 4 slaves
  steps: |
    1. DUT1 do primary service discovery on DUT[2-5]
  expected result: |
    1. succeed
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 4 1 "[2,3,4,5]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
- ID: BTSTK_GATT_30002
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection service discovery test
  summary: do primary service discovery when DUT1 is slave, connected by 4 masters
  steps: |
    1. DUT[2-5] do primary service discovery
  expected result: |
    1. succeed
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - "SSC SSC[2-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Discover,OK"]
- ID: BTSTK_GATT_30003
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection service discovery test
  summary: do primary service discovery when DUT1 connect to DUT[2-3] and connected by DUT[4-5]
  steps: |
    1. DUT1 do primary service discovery for DUT[2-3]
    2. DUT[4-5] do primary service discovery for DUT1
  expected result: |
    1. succeed
    2. succeed
  initial condition: BLE_CONN7
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 2 1 "[2,3]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC[4-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Discover,OK"]
- ID: BTSTK_GATT_31001
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection read test
  summary: do read when DUT1 role is master, connected with 4 slaves
  steps: |
    1. do primary service discovery
    2. do read long and read short
    3. loop step 1-2 for all DUTs
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 4 3 "[2,3,4,5]" "[2,3,4,5]" "[2,3,4,5]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C300,1"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C301,256"]
- ID: BTSTK_GATT_31002
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection read test
  summary: do read when DUT1 is slave, connected by 4 masters
  steps: |
    1. do primary service discovery on DUT[2-5]
  expected result: |
    1. succeed
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - "SSC SSC[2-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[2-5] gattc -R -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:ReadOnce,0010,A002,C300,1"]
  - - "SSC SSC[2-5] gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:ReadOnce,0010,A002,C301,256"]
- ID: BTSTK_GATT_31003
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection read test
  summary: do read when DUT1 connect to DUT[2-3] and connected by DUT[4-5]
  steps: |
    1. DUT1 do primary service discovery for DUT[2-3]
    2. DUT1 do read on DUT[2-3]
    3. DUT[4-5] do primary service discovery for DUT1
    4. DUT[4-5] do read on DUT1
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
  initial condition: BLE_CONN7
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 2 3 "[2,3]" "[2,3]" "[2,3]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C300,1"]
  - - "SSC SSC1 gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:ReadOnce,0010,A002,C301,256"]
  - - "SSC SSC[4-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[4-5] gattc -R -z char -s 0xA002 -c 0xC300 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:ReadOnce,0010,A002,C300,1"]
  - - "SSC SSC[4-5] gattc -R -z char -s 0xA002 -c 0xC301 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:ReadOnce,0010,A002,C301,256"]
- ID: BTSTK_GATT_32001
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection write test
  summary: do write when DUT1 role is master, connected with 4 slaves
  steps: |
    1. do primary service discovery
    2. do write long and write short
    3. loop step 1-2 for all DUTs
  expected result: |
    1. succeed
    2. succeed
    3. succeed
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 4 3 "[2,3,4,5]" "[2,3,4,5]" "[2,3,4,5]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -l 1 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Write,OK,0010,A002,C302"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC304 -l 256 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Write,OK,0010,A002,C304"]
- ID: BTSTK_GATT_32002
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection write test
  summary: do write when DUT1 is slave, connected by 4 masters
  steps: |
    1. do primary service discovery on DUT[2-5]
  expected result: |
    1. succeed
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - "SSC SSC[2-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[2-5] gattc -W -z char -s 0xA002 -c 0xC302 -l 1 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Write,OK,0010,A002,C302"]
  - - "SSC SSC[2-5] gattc -W -z char -s 0xA002 -c 0xC304 -l 256 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Write,OK,0010,A002,C304"]
- ID: BTSTK_GATT_32003
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection write test
  summary: do write when DUT1 connect to DUT[2-3] and connected by DUT[4-5]
  steps: |
    1. DUT1 do primary service discovery for DUT[2-3]
    2. DUT1 do write on DUT[2-3]
    3. DUT[4-5] do primary service discovery for DUT1
    4. DUT[4-5] do write on DUT1
  expected result: |
    1. succeed
    2. succeed
    3. succeed
    4. succeed
  initial condition: BLE_CONN7
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 2 3 "[2,3]" "[2,3]" "[2,3]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC302 -l 1 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Write,OK,0010,A002,C302"]
  - - "SSC SSC1 gattc -W -z char -s 0xA002 -c 0xC304 -l 256 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Write,OK,0010,A002,C304"]
  - - "SSC SSC[4-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[4-5] gattc -W -z char -s 0xA002 -c 0xC302 -l 1 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Write,OK,0010,A002,C302"]
  - - "SSC SSC[4-5] gattc -W -z char -s 0xA002 -c 0xC304 -l 256 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Write,OK,0010,A002,C304"]
- ID: BTSTK_GATT_33001
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection notify test
  summary: do notify when DUT1 role is master, connected with 4 slaves
  steps: |
    1. do primary service discovery
    2. do register nofity for char
    3. do notify on DUT[2-5]
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 receive notification on DUT[2-5]
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 4 3 "[2,3,4,5]" "[2,3,4,5]" "[2,3,4,5]" "[2,3,4,5]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC305 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C305"]
  - - "SSC SSC{%d} gatts -N -c 0xC305 -l 1 -p 0xA2 -r <dut1_bt_mac>"
    - ['P SSC1 RE "\+GATTC:Notification,0010,A002,C305,1,%%s"%%(<dut{%d}_bt_mac>)']
- ID: BTSTK_GATT_33002
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection notify test
  summary: do notify when DUT1 is slave, connected by 4 masters
  steps: |
    1. do primary service discovery on DUT[2-5]
    2. DUT[2-5] do register notify
    3. DUT1 do notify to DUT[2-5]
  expected result: |
    1. succeed
    2. succeed
    3. DUT[2-5] receive notification
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - "SSC SSC[2-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[2-5] gattc -N -z register -s 0xA002 -c 0xC305 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:RegNotify,OK,0010,A002,C305"]
  - - LOOP 4 1 "[2,3,4,5]" "[2,3,4,5]"
    - ['']
  - - "SSC SSC1 gatts -N -c 0xC305 -l 1 -p 0xA2 -r <dut{%d}_bt_mac>"
    - ['P SSC{%d} RE "\+GATTC:Notification,0010,A002,C305,1,%%s"%%(<dut1_bt_mac>)']
- ID: BTSTK_GATT_33003
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection notify test
  summary: do notify when DUT1 connect to DUT[2-3] and connected by DUT[4-5]
  steps: |
    1. DUT1 do primary service discovery for DUT[2-3]
    2. DUT1 register notify
    3. DUT[2-3] send notify to DUT1
    4. DUT[4-5] do primary service discovery for DUT1
    5. DUT[4-5] register notify
    6. DUT1 send notofy to DUT[4-5]
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 receive notify from DUT[2-3]
    4. succeed
    5. succeed
    6. DUT[4-5] receive notify
  initial condition: BLE_CONN7
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 2 2 "[2,3]" "[2,3]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC305 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C305"]
  - - "SSC SSC[2-3] gatts -N -c 0xC305 -l 1 -p 0xA2 -r <dut1_bt_mac>"
    - ['P SSC1 RE "\+GATTC:Notification,0010,A002,C305,1,%%s"%%(<dut[2-3]_bt_mac>)']
  - - "SSC SSC[4-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[4-5] gattc -N -z register -s 0xA002 -c 0xC305 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:RegNotify,OK,0010,A002,C305"]
  - - LOOP 2 1 "[4,5]" "[4,5]"
    - ['']
  - - "SSC SSC1 gatts -N -c 0xC305 -l 1 -p 0xA2 -r <dut{%d}_bt_mac>"
    - ['P SSC{%d} RE "\+GATTC:Notification,0010,A002,C305,1,%%s"%%(<dut1_bt_mac>)']
- ID: BTSTK_GATT_34001
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection indicate test
  summary: do indicate when DUT1 role is master, connected with 4 slaves
  steps: |
    1. do primary service discovery
    2. do register indication for char
    3. do indicate on DUT[2-5]
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 receive indication on DUT[2-5]
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 4 2 "[2,3,4,5]" "[2,3,4,5]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC306 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C306"]
  - - "SSC SSC[2-5] gatts -I -c 0xC306 -l 1 -p 0xA2 -r <dut1_bt_mac>"
    - ['P SSC1 RE "\+GATTC:Indication,0010,A002,C306,1,%%s"%%(<dut[2-5]_bt_mac>)']
- ID: BTSTK_GATT_34002
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection indicate test
  summary: do indicate when DUT1 is slave, connected by 4 masters
  steps: |
    1. do primary service discovery on DUT[2-5]
    2. DUT[2-5] do register indication
    3. DUT1 do indicate to DUT[2-5]
  expected result: |
    1. succeed
    2. succeed
    3. DUT[2-5] receive indication
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - "SSC SSC[2-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[2-5] gattc -N -z register -s 0xA002 -c 0xC306 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[2-5] C +GATTC:RegNotify,OK,0010,A002,C306"]
  - - LOOP 4 1 "[2,3,4,5]" "[2,3,4,5]"
    - ['']
  - - "SSC SSC1 gatts -I -c 0xC306 -l 1 -p 0xA2 -r <dut{%d}_bt_mac>"
    - ['P SSC{%d} RE "\+GATTC:Indication,0010,A002,C306,1,%%s"%%(<dut1_bt_mac>)']
- ID: BTSTK_GATT_34003
  <<: *GATT_CASE
  test point 2: BLE GATT multi connection indicate test
  summary: do indicate when DUT1 connect to DUT[2-3] and connected by DUT[4-5]
  steps: |
    1. DUT1 do primary service discovery for DUT[2-3]
    2. DUT1 register indication
    3. DUT[2-3] send indicate to DUT1
    4. DUT[4-5] do primary service discovery for DUT1
    5. DUT[4-5] register indication
    6. DUT1 send indicate to DUT[4-5]
  expected result: |
    1. succeed
    2. succeed
    3. DUT1 receive indication from DUT[2-3]
    4. succeed
    5. succeed
    6. DUT[4-5] receive indication
  initial condition: BLE_CONN7
  test environment: SSC_T5_1
  allow fail: 3/5
  cmd set:
  - ""
  - - LOOP 2 2 "[2,3]" "[2,3]"
    - ""
  - - "SSC SSC1 gattc -D -z primaryService -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:Discover,OK"]
  - - "SSC SSC1 gattc -N -z register -s 0xA002 -c 0xC306 -p 0x10 -r <dut{%d}_bt_mac>"
    - ["R SSC1 C +GATTC:RegNotify,OK,0010,A002,C306"]
  - - "SSC SSC[2-3] gatts -I -c 0xC306 -l 1 -p 0xA2 -r <dut1_bt_mac>"
    - ['P SSC1 RE "\+GATTC:Indication,0010,A002,C306,1,%%s"%%(<dut[2-3]_bt_mac>)']
  - - "SSC SSC[4-5] gattc -D -z primaryService -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:Discover,OK"]
  - - "SSC SSC[4-5] gattc -N -z register -s 0xA002 -c 0xC306 -p 0x10 -r <dut1_bt_mac>"
    - ["R SSC[4-5] C +GATTC:RegNotify,OK,0010,A002,C306"]
  - - LOOP 2 1 "[4,5]" "[4,5]"
    - ['']
  - - "SSC SSC1 gatts -I -c 0xC306 -l 1 -p 0xA2 -r <dut{%d}_bt_mac>"
    - ['P SSC{%d} RE "\+GATTC:Indication,0010,A002,C306,1,%%s"%%(<dut1_bt_mac>)']
- ID: BTSTK_GATT_50001
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT read char performance test
  initial condition: BLE_CONN3
  Test App: SSC_BLE_PERF
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do read char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEGATTPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "read"
    - ""
  - - op_char = "0xC301"
    - ""
- ID: BTSTK_GATT_50002
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT write char performance test
  initial condition: BLE_CONN3
  Test App: SSC_BLE_PERF
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEGATTPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "write"
    - ""
  - - op_char = "0xC317"
    - ""
  - - op_len = 490
    - ""
- ID: BTSTK_GATT_50003
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT notify performance test
  initial condition: BLE_CONN3
  Test App: SSC_BLE_PERF
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do notify for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEGATTPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "notify"
    - ""
  - - op_char = "0xC305"
    - ""
  - - op_len = 490
    - ""
- ID: BTSTK_GATT_50004
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT indicate performance test
  initial condition: BLE_CONN3
  Test App: SSC_BLE_PERF
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do notify for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEGATTPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "indicate"
    - ""
  - - op_char = "0xC306"
    - ""
  - - op_len = 256
    - ""
- ID: BTSTK_GATT_50005
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT master connect 4 slave and read char performance test
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "read"
    - ""
  - - op_char = "0xC301"
    - ""
  - - op_len = 256
    - ""
  - - master_duts = ["SSC1"]
    - ""
  - - slave_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
- ID: BTSTK_GATT_50006
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT 4 master connect 1 slave and read char performance test
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "read"
    - ""
  - - op_char = "0xC301"
    - ""
  - - op_len = 256
    - ""
  - - master_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
  - - slave_duts = ["SSC1"]
    - ""
- ID: BTSTK_GATT_50007
  <<: *GATT_CASE
  Test App: SSC_BLE, SSC_PSRAM
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT master connect 4 slave and write char performance test
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "write"
    - ""
  - - op_char = "0xC317"
    - ""
  - - op_len = 490
    - ""
  - - master_duts = ["SSC1"]
    - ""
  - - slave_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
- ID: BTSTK_GATT_50008
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: GATT 4 master connect 1 slave and write char performance test
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "write"
    - ""
  - - op_char = "0xC317"
    - ""
  - - op_len = 490
    - ""
  - - master_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
  - - slave_duts = ["SSC1"]
    - ""
- ID: BTSTK_GATT_50009
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: notify performance test when GATT master connects to 4 slaves
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "notify"
    - ""
  - - op_char = "0xC305"
    - ""
  - - op_len = 490
    - ""
  - - master_duts = ["SSC1"]
    - ""
  - - slave_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
- ID: BTSTK_GATT_50010
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: notify performance test when GATT 4 masters connect to 1 slave
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "notify"
    - ""
  - - op_char = "0xC305"
    - ""
  - - op_len = 490
    - ""
  - - master_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
  - - slave_duts = ["SSC1"]
    - ""
- ID: BTSTK_GATT_50011
  Test App: SSC_BLE, SSC_PSRAM
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: indicate performance test when GATT master connects 4 slaves
  initial condition: BLE_CONN5
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "indicate"
    - ""
  - - op_char = "0xC306"
    - ""
  - - op_len = 256
    - ""
  - - master_duts = ["SSC1"]
    - ""
  - - slave_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
- ID: BTSTK_GATT_50012
  <<: *GATT_CASE
  category: Performance
  test point 1: performance + stress
  test point 2: BLE GATT performance test
  summary: indicate performance test when GATT 4 masters connect 1 slave
  initial condition: BLE_CONN6
  test environment: SSC_T5_1
  steps: |
    1. update connection parameter
    2. do primary service discovery
    3. do write char for some time
  expected result: |
    1. succeed
    2. succeed
    3. calculate throughput
  execution time: 2
  cmd set:
  - "BLEStress/BLEMultiPerformance"
  - - test_time = 120
    - ""
  - - mtu = 512
    - ""
  - - gatt_op = "indicate"
    - ""
  - - op_char = "0xC306"
    - ""
  - - op_len = 256
    - ""
  - - master_duts = ["SSC2", "SSC3", "SSC4", "SSC5"]
    - ""
  - - slave_duts = ["SSC1"]
    - ""
