# Documentation: .gitlab/ci/README.md#manifest-file-to-control-the-buildtest-apps

# TODO: Modify the configuration after the files matching rules are changed
# Or delete TODO without modifying the configuration if it is sure that current rules are correct.
.openthread_dependencies: &openthread_dependencies
  depends_components:
    - esp_coex
    - esp_netif
    - esp_phy
    - ieee802154
    - lwip
    - openthread
  depends_filepatterns:
    - examples/common_components/iperf/*
    - examples/common_components/iperf/**/*
    - examples/openthread/*
    - examples/openthread/**/*

.openthread_sleep_dependencies: &openthread_sleep_dependencies
  depends_components:
    - esp_hw_support

examples/openthread/ot_br:
  enable:
    - if: SOC_WIFI_SUPPORTED == 1
  disable_test:
    - if: IDF_TARGET in ["esp32", "esp32c3", "esp32c2", "esp32c6", "esp32s2"]
      temporary: true
      reason: only test on esp32s3
  <<: *openthread_dependencies

examples/openthread/ot_cli:
  enable:
    - if: SOC_IEEE802154_SUPPORTED == 1
  <<: *openthread_dependencies

examples/openthread/ot_rcp:
  enable:
    - if: SOC_IEEE802154_SUPPORTED == 1
  disable_test:
    - if: IDF_TARGET == "esp32h2"
      temporary: true
      reason: only test on esp32c6
  <<: *openthread_dependencies

examples/openthread/ot_sleepy_device/deep_sleep:
  enable:
    - if: SOC_IEEE802154_SUPPORTED == 1
  <<: [*openthread_dependencies, *openthread_sleep_dependencies]

examples/openthread/ot_sleepy_device/light_sleep:
  enable:
    - if: SOC_IEEE802154_SUPPORTED == 1
  <<: [*openthread_dependencies, *openthread_sleep_dependencies]
